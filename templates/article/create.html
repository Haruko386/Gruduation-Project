{% extends "base.html" %}
{% load static %}
{% block title %}
    å†™æ–‡ç« 
{% endblock title %}
{% block content %}
    <style>
        .body{
            background-color: white;
        }
        .article-container {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin-top: 20px;
        }

        .editor,
        .preview {
            flex: 1;
            padding: 20px;
        }

        .preview {
            border-left: 1px solid #ccc;
            background-color: #f8f8f8;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            overflow-y: auto;
            max-height: 750px; /* æ·»åŠ æœ€å¤§é«˜åº¦ */
        }

        textarea {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            resize: none;
        }

        .preview-content {
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
        }

        .preview-text {
            color: #333;
        }

        .preview-text em {
            font-style: italic;
        }

        .preview-text strong {
            font-weight: bold;
        }

        .preview-text a {
            color: #007bff;
            text-decoration: none;
        }

        .preview-text a:hover {
            text-decoration: underline;
        }

        .preview-animation {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .form-container {
            /* æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–æ ·å¼ */
        }

        .form-row {
            display: flex;
            justify-content: space-between; /* å¦‚æœéœ€è¦å…ƒç´ ä¹‹é—´æœ‰é—´éš” */
            align-items: center; /* å‚ç›´å±…ä¸­å¯¹é½ */
        }

        .form-group {
            /* å¯èƒ½éœ€è¦è°ƒæ•´marginæˆ–paddingä»¥é€‚åº”æ–°çš„å¸ƒå±€ */
            flex: 1; /* å¦‚æœå¸Œæœ›å…ƒç´ ç­‰å®½ */
            margin-right: 10px; /* å¯é€‰ï¼Œç”¨äºå…ƒç´ ä¹‹é—´çš„é—´éš” */
        }

        /* å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä¸ºæœ€åä¸€ä¸ªform-groupæ·»åŠ ç‰¹æ®Šæ ·å¼ä»¥ç§»é™¤å³è¾¹è· */
        .form-row .form-group:last-child {
            margin-right: 0;
        }
    </style>
    <div class="article-container">
        <div class="preview" id="markdown-preview">
            <div class="preview-content">
                <p class="preview-text preview-animation">è¿™é‡Œæ˜¯å®æ—¶é¢„è§ˆåŒºåŸŸã€‚</p>
                <p class="preview-text preview-animation">æ‚¨å¯ä»¥åœ¨å³ä¾§ç¼–è¾‘åŒºåŸŸè¾“å…¥ Markdown
                    ä»£ç ï¼Œå¹¶åœ¨æ­¤å¤„æŸ¥çœ‹å®æ—¶æ¸²æŸ“ç»“æœã€‚</p>
                <p class="preview-text preview-animation">åœ¨æ­¤æ‚¨å¯ä»¥ç•…æ‰€æ¬²è¨€</p>
                <p class="preview-text preview-animation">ç¥æ‚¨å†™ä½œæ„‰å¿«ğŸ˜‰</p>
            </div>
        </div>
        <div class="editor">
            <h2 align="center">æ–‡ç« ä¹¦å†™</h2>
            <p align="center">æœ¬æ–‡æ”¯æŒMarkdownè¯­æ³•ï¼Œç‚¹å‡»<a href="https://markdown.com.cn/basic-syntax/">ğŸ”—</a>è®¿é—®MarkdownåŸºæœ¬è¯­æ³•æ•™ç¨‹
            </p>
            <form method="post" action="." enctype="multipart/form-data" class="form-container">
                {% csrf_token %}
                <!-- æ–‡ç« æ ‡é¢˜å’Œæ ç›®ï¼Œä½¿ç”¨form-rowç±» -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">æ–‡ç« æ ‡é¢˜</label>
                        <input type="text" class="form-control" id="title" name="title" required
                               placeholder="åœ¨æ­¤è¾“å…¥æ‚¨çš„æ ‡é¢˜">
                    </div>
                    <div class="form-group">
                        <label for="column">æ ç›®</label>
                        <select class="form-control" id="column" name="column">
                            <option value="none">è¯·é€‰æ‹©æ ç›®..</option>
                            {% for column in columns %}
                                <option value="{{ column.id }}">{{ column }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <!-- æ–‡ç« æ ‡ç­¾å’Œæ ‡é¢˜å›¾ï¼Œä½¿ç”¨form-rowç±» -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="tags">æ ‡ç­¾</label>
                        <input type="text" class="form-control" id="tags" name="tags" placeholder="è¯·ç”¨è‹±æ–‡é€—å·å¯¹æ ‡ç­¾è¿›è¡Œåˆ†å‰²ï¼Œå¦‚: a, b, c,">
                    </div>
                    <div class="form-group">
                        <label for="avatar">æ ‡é¢˜å›¾</label>
                        <input type="file" class="form-control-file" name="avatar" id="avatar">
                    </div>
                </div>
                <!-- æ–‡ç« æ­£æ–‡ -->
                <div class="form-group">
                    <label for="body">æ–‡ç« æ­£æ–‡</label>
                    <textarea class="form-control" id="body" name="content" rows="12" required
                              placeholder="åœ¨æ­¤è¾“å…¥æ‚¨çš„æ­£æ–‡ï¼Œæ”¯æŒMarkdown" oninput="updatePreview()"></textarea>
                </div>
                <!-- æäº¤æŒ‰é’® -->
                <button type="submit" class="btn btn-primary">å®Œæˆ</button>
            </form>
        </div>
    </div>

    <script>
        const markdownInput = document.getElementById('body');
        const markdownPreview = document.getElementById('markdown-preview');

        markdownInput.addEventListener('input', updatePreview);

        function updatePreview() {
            const markdownText = markdownInput.value;
            markdownPreview.innerHTML = marked(markdownText);
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/3.0.1/marked.min.js"></script>
{% endblock content %}
